<style>
    #shopify-section-{{section.id}} .timedown-product {
  width: 100%;
  height: 58.59vw;
  background: linear-gradient(0deg, #79C9E5, #4E98D0, #B9EDFF);
}
  #shopify-section-{{section.id}} .timedown-product .wrapper {
  padding: 3.91vw 0;
  width: 58.59vw;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  align-items: center;
}
  #shopify-section-{{section.id}} .timedown-product .wrapper .title {
  font-size: 1.56vw;
  color: #155D8E;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 0.78vw;
  font-weight: bold;
  font-size: 1.95vw;
}
  #shopify-section-{{section.id}} .timedown-product .wrapper .title .icon {
  width: 2.34vw;
  height: 2.34vw;
  object-fit: contain;
}
  #shopify-section-{{section.id}} .timedown-product .wrapper .desc {
  margin-top: 0.47vw;
  font-size: 0.94vw;
  color: #333;
}
  #shopify-section-{{section.id}} .timedown-product .wrapper .time-down {
  margin: 1.56vw 0;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 1.17vw;
}
  #shopify-section-{{section.id}} .timedown-product .wrapper .time-down .number1 {
  color: #155D8E;
  font-size: 1.37vw;
  font-weight: bold;
}
  #shopify-section-{{section.id}} .timedown-product .wrapper .time-down .number2 {
  color: #333;
  font-size: 0.7vw;
}
  #shopify-section-{{section.id}} .timedown-product .wrapper .deal-list {
  width: 50.78vw;
  border-radius: 39.02vw;
  background: #e2f6ff;
  overflow: hidden;
  height: 6.84vw;
  margin: 2.34vw 0;
}
  #shopify-section-{{section.id}} .timedown-product .wrapper .deal-list .line {
  width: 90%;
  height: 0.04vw;
  background: #155E8F;
  margin: 0 auto;
  margin-top: 2.34vw;
  position: relative;
}
  #shopify-section-{{section.id}} .timedown-product .wrapper .deal-list .line .rocket {
  position: absolute;
  left: 12%;
  width: 3.13vw;
  height: 2.34vw;
  top: 50%;
  object-fit: contain;
  transform: translateY(-50%);
}
 #shopify-section-{{section.id}} .timedown-product .wrapper .deal-list .line .rocket.scecond {
  left: 46%;
}
 #shopify-section-{{section.id}} .timedown-product .wrapper .deal-list .line .rocket.thrid {
  left: 80%;
}
  #shopify-section-{{section.id}} .timedown-product .wrapper .deal-list .line .item-wrapper {
  position: absolute;
  left: 0;
  width: 100%;
  top: 0.78vw;
  display: flex;
  align-items: center;
  flex-direction: row;
  justify-content: space-around;
}
  #shopify-section-{{section.id}} .timedown-product .wrapper .deal-list .line .item-wrapper .item {
  width: 11.72vw;
  font-size: 0.94vw;
  color: #155E8F;
  font-weight: bold;
  text-align: center;
}
  #shopify-section-{{section.id}} .timedown-product .wrapper .deal-list .line .item-wrapper .item .name {
   margin-top: 0.39vw;
   font-size:0.94vw;
      display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
  #shopify-section-{{section.id}} .timedown-product .wrapper .products-wrapper {
  width: 58.59vw;
  margin-top: 3.13vw;
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  gap: 1.48vw;
}
  #shopify-section-{{section.id}} .timedown-product .wrapper .products-wrapper .product-card {
  width: calc(33.33% - 0.98vw);
  height: 26.56vw;
  background-color: #fff;
  border-radius: 1.17vw;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  align-items: center;
  position:relative;
}
 #shopify-section-{{section.id}} .timedown-product .wrapper .products-wrapper .product-card .sale-icon {
  position: absolute;
  width: 4.69vw;
  height: 4.69vw;
  object-fit: contain;
  top: 1.17vw;
  left: 1.17vw;
}
  #shopify-section-{{section.id}} .timedown-product .wrapper .products-wrapper .product-card .top {
  padding: 0 1.95vw;
  height: 55%;
  width: 100%;
  background-color: #fff;
  display: flex;
  justify-content: center;
  align-items: center;
}
  #shopify-section-{{section.id}} .timedown-product .wrapper .products-wrapper .product-card .top img {
  width: 80%;
  aspect-ratio: 1;
  object-fit: contain;
}
  #shopify-section-{{section.id}} .timedown-product .wrapper .products-wrapper .product-card .bottom {
  height: 45%;
  width: 100%;
  padding-top: 0.78vw;
  background: #C8EDFF;
  padding: 0.78vw 0.5vw;
}
    #shopify-section-{{section.id}} .button-ATC , #shopify-section-{{section.id}}  .card-action.has-compare{
       padding:0;
       flex:1;
     }
  #shopify-section-{{section.id}} .timedown-product .wrapper .products-wrapper .product-card .bottom .name {
  font-size: 0.94vw;
  font-weight: bold;
       display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
  #shopify-section-{{section.id}} .timedown-product .wrapper .products-wrapper .product-card .bottom .price {
  display: flex;
  margin-left: auto;
  align-items: end;
  margin-top: 0.78vw;
}
  #shopify-section-{{section.id}} .timedown-product .wrapper .products-wrapper .product-card .bottom .price .new-price {
  font-size: 1.76vw;
  color: #F8611F;
}
  #shopify-section-{{section.id}} .timedown-product .wrapper .products-wrapper .product-card .bottom .price .old-price {
  font-size: 0.78vw;
  color: #666;
}
  #shopify-section-{{section.id}} .timedown-product .wrapper .products-wrapper .product-card .bottom .btns {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 0.78vw;
   gap: 0.52vw;
}
   #shopify-section-{{section.id}} .timedown-product .wrapper .products-wrapper .product-card .bottom .btns  .learn_more{
    color:#03678B;
   
    border:1px solid #03678B;
    padding: 0.32vw 1.28vw;
    border-radius:999px;
    font-size: 0.78vw;
    height: 2.34vw;
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight:bold;
  }
  #shopify-section-{{section.id}} .button-ATC , #shopify-section-{{section.id}} .card-action .button{
    width: 7.59vw;
    height: 2.34vw;
    flex:1;
    border-radius: 999px;
    font-size: 0.78vw;
    border: none;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    background: #F8611F;
     color: #fff;
  }
  #shopify-section-{{section.id}} .timedown-product .wrapper .products-wrapper .product-card .bottom .btns .btn.learn {
  color: #03678B;
}
  #shopify-section-{{section.id}} .timedown-product .wrapper .products-wrapper .product-card .bottom .btns .btn.buy {
  background: #F8611F;
  color: #fff;
  border: 0.04vw solid #F8611F;
}
  @media(max-width:750px){
     #shopify-section-{{section.id}} .timedown-product {
    width: 100%;
    height: 200vw;
    padding: 13.33vw 0;
    background: linear-gradient(0deg, #79C9E5, #4E98D0, #B9EDFF);
  }
   #shopify-section-{{section.id}} .timedown-product .wrapper {
    overflow: hidden;
    padding: 13.33vw 0;
    width: 100%;
    padding: 0;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
   #shopify-section-{{section.id}} .timedown-product .wrapper .title {
    padding: 0 6.67vw;
    font-size: 5.33vw;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 0vw;
    font-weight: bold;
    font-size: 5.6vw;
    text-align: center;
  }
   #shopify-section-{{section.id}} .timedown-product .wrapper .title .icon {
    width: 8vw;
    height: 8vw;
    object-fit: contain;
  }
   #shopify-section-{{section.id}} .timedown-product .wrapper .desc {
    margin-top: 1.6vw;
    font-size: 3.2vw;
    color: #333;
    text-align: center;
  }
   #shopify-section-{{section.id}} .timedown-product .wrapper .time-down {
    width: 90%;
    margin: 0 auto;
    margin: 5.33vw 0;
    display: flex;
    justify-content: center;
    align-items: start;
    gap: 4vw;
    text-align: center;
  }
   #shopify-section-{{section.id}} .timedown-product .wrapper .time-down .number1 {
    color: #155D8E;
    font-size: 4.67vw;
    font-weight: bold;
  }
    
   #shopify-section-{{section.id}} .timedown-product .wrapper .time-down .number2 {
    color: #333;
    font-size: 2.4vw;
  }
   #shopify-section-{{section.id}} .timedown-product .wrapper .deal-list {
    padding: 0 6.67vw;
    text-align: center;
    width: 90%;
    border-radius: 3.47vw;
    background: #e2f6ff;
    overflow: hidden;
    height: 16vw;
    margin: 4vw auto;
  }
   #shopify-section-{{section.id}} .timedown-product .wrapper .deal-list .line {
    height: 0.13vw;
    background: #155E8F;
    margin-top: 4vw;
    position: relative;
  }
   #shopify-section-{{section.id}} .timedown-product .wrapper .deal-list .line .rocket {
    position: absolute;
    left: 12%;
    width: 4.93vw;
    height: 4.93vw;
    top: 50%;
    object-fit: contain;
    transform: translateY(-50%);
  }
   #shopify-section-{{section.id}} .timedown-product .wrapper .deal-list .line .item-wrapper {
    position: absolute;
    left: 0;
    width: 100%;
    top: 2.67vw;
    display: flex;
    align-items: center;
    flex-direction: row;
    justify-content: space-around;
  }
   #shopify-section-{{section.id}} .timedown-product .wrapper .deal-list .line .item-wrapper .item {
    width: 40vw;
    font-size: 2.13vw;
    color: #155E8F;
    font-weight: bold;
    text-align: center;
  }
   #shopify-section-{{section.id}} .timedown-product .wrapper .deal-list .line .item-wrapper .item .name {
    margin-top: 1.33vw;
    font-size:1.94vw;
        display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  }
   #shopify-section-{{section.id}} .timedown-product .wrapper .products-wrapper {
    width: 100%;
    padding: 0 6.67vw;
    margin-top: 10.67vw;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    gap: 5.07vw;
    overflow-x: auto;
  }
   #shopify-section-{{section.id}} .timedown-product .wrapper .products-wrapper::-webkit-scrollbar {
    display: none;
  }
   #shopify-section-{{section.id}} .timedown-product .wrapper .products-wrapper .product-card {
    width: 70%;
    flex-shrink: 0;
    height: 90.67vw;
    background-color: #fff;
    border-radius: 4vw;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
   #shopify-section-{{section.id}} .timedown-product .wrapper .products-wrapper .product-card .top {
    padding: 0 6.67vw;
    height: 55%;
    width: 100%;
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
  }
   #shopify-section-{{section.id}} .timedown-product .wrapper .products-wrapper .product-card .top img {
    width: 80%;
    aspect-ratio: 1;
    object-fit: contain;
  }
   #shopify-section-{{section.id}} .timedown-product .wrapper .products-wrapper .product-card .bottom {
    height: 45%;
    width: 100%;
    padding-top: 2.67vw;
    background: #C8EDFF;
    padding: 2.67vw;
  }
   #shopify-section-{{section.id}} .timedown-product .wrapper .products-wrapper .product-card .bottom .name {
    font-size: 2.67vw;
    font-weight: bold;
        display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
    text-align: center;
  }
   #shopify-section-{{section.id}} .timedown-product .wrapper .products-wrapper .product-card .bottom .price {
    display: flex;
    margin-left: auto;
    align-items: end;
    margin-top: 2.67vw;
  }
   #shopify-section-{{section.id}} .timedown-product .wrapper .products-wrapper .product-card .sale-icon {
    position: absolute;
    width: 16vw;
    height: 16vw;
    object-fit: contain;
    top: 4vw;
    left: 4vw;
  }
   #shopify-section-{{section.id}} .timedown-product .wrapper .products-wrapper .product-card .bottom .price .new-price {
    font-size: 6vw;
    color: #F8611F;
    font-weight: bold;
  }
   #shopify-section-{{section.id}} .timedown-product .wrapper .products-wrapper .product-card .bottom .price .old-price {
    font-size: 2.67vw;
    color: #666;
  }
   #shopify-section-{{section.id}} .timedown-product .wrapper .products-wrapper .product-card .bottom .btns {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 2.67vw;
    gap: 3.2vw;
  }
  
  #shopify-section-{{section.id}} .button-ATC , #shopify-section-{{section.id}} .card-action .button{
    width: 29.33vw;
    height: 8vw;
    border-radius: 999px;
    font-size: 2.67vw;
    border: none;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
  }
    #shopify-section-{{section.id}} .timedown-product .wrapper .products-wrapper .product-card .bottom .btns .learn_more{
          color:#03678B;
          border:1px solid #03678B;
           width: 25.33vw;
          height: 8vw;
          border-radius: 999px;
          font-size: 2.67vw;
          display: flex;
          justify-content: center;
          align-items: center;
          cursor: pointer;
      }
     #shopify-section-{{section.id}} .button-ATC , #shopify-section-{{section.id}} .card-action .button {
        width: 25.33vw;
        height: 8vw;
        border-radius: 999px;
        font-size: 2.67vw;
         border:none;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
      }
  }
</style>
 <div class="timedown-product" data-id="{{ section.settings.bind }}">
            <div class="wrapper">
                <div class="title">
                    <img class="icon" src="https://cdn.shopify.com/s/files/1/0678/2933/4237/files/5..png?v=1740736525" alt="">
                        Enjoy 24 Hours of Unbeatable Deals
                    <img class="icon" src="https://cdn.shopify.com/s/files/1/0678/2933/4237/files/5._67d4c4e6-c29a-407f-802e-fbbf17a6101f.png?v=1740736526" alt="">
                </div>
                <div class="desc">Elevate your engraving experience with our top-notch crafting materials.</div>
                <div class="time-down">
                    <div class="time-box">
                        <span class="number1">05</span>
                        <span class="number2">DAYS</span>
                    </div>
                    <div class="time-box">
                        <span class="number1">03</span>
                        <span class="number2">HOURS</span>
                    </div>
                    <div class="time-box">
                        <span class="number1">21</span>
                        <span class="number2">MINUTES</span>
                    </div>
                    <div class="time-box">
                        <span class="number1">07</span>
                        <span class="number2">SECONDS</span>
                    </div>
                </div>
                <div class="deal-list">
                    <div class="line">
                        <img class="rocket" src="https://cdn.shopify.com/s/files/1/0678/2933/4237/files/5._feecf732-ea78-425f-8f71-51e7caed6cfe.png?v=1740737256" alt="">
                        <div class="item-wrapper">
                            <div class="item">
                                <div class="name">First Round
                                    <br /> 12:00 / 03.03 / 2025
                                </div>
                            </div>
                            <div class="item">
                                <div class="name">Second Round <br />
                                    12:00 / 06.03 / 2025
                                </div>
                            </div>
                            <div class="item">
                                <div class="name">Third Round <br />
                                    12:00 / 09.03 / 2025
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <div class="products-wrapper">
                    {% for block in section.blocks %}
                        {% case block.type %}
                            {% when 'product' %}
                                  <div class="product-card" {{ block.shopify_attributes }}>
                                    {% if section.settings.icon != blank %}
                                       <img class="sale-icon" src="{{ section.settings.icon | img_url:'' }}" alt="">
                                    {% endif %}
                                    <div class="top">
                                        <img width="" height="" src="{{ block.settings.product.images.first | img_url:'' }}"
                                            alt="{{ block.settings.product.images.first.alt }}">
                                    </div>
                                    <div class="bottom">
                                        <div class="name">{{ block.settings.product.title }}</div>
                                       <div class="price">
                                              <div class="new-price">
                                                {{ block.settings.product.price | money }}
                                              </div>
                                              {% if block.settings.product.compare_at_price > block.settings.product.price %}
                                                <s class="old-price">
                                                  {{ block.settings.product.compare_at_price | money }}
                                                </s>
                                              {% endif %}
                                        </div>
                                        <div class="btns">
                                            <a href="{{ block.settings.product.url }}" class="learn_more">Learn More</a>
                                             {%- if settings.show_quick_view and settings.product_quick_view_type == 'default' -%}
                                                <div class="card-quickview">
                                                  <button type="button" title="{{ 'product.product.quick_view' | t }}" class="quickview-button button" data-product-id="{{ block.settings.product.id }}" data-open-quick-view-popup data-product-handle="{{ block.settings.product.handle }}">{{ 'product.product.quick_view' | t }}</button>
                                                </div>
                                              {%- endif -%}
                                              
                                              {%- if settings.show_action or settings.show_compare -%}
                                                <div class="card-action has-compare{% if settings.show_product_marquee %} has-marquee{% endif %}">
                                                  {%- if settings.show_action -%}
                                                    {% render 'add-to-cart-form', product: block.settings.product, id: 'form', position: position, sectionId: sectionId %}
                                                  {%- endif -%}
                                                </div>
                                              {%- endif -%}
                                              {%- if settings.show_product_marquee -%}
                                                {%- render 'product-card-marquee', product: product -%}     
                                              {%- endif -%}
                                        </div>
                                    </div>
                                </div>
                        {% endcase %}
                    {% endfor %}
                </div>
            </div>
        </div>
        <script>
           (function(){
           
            const targetDate = new Date("{{ section.settings.time }}").getTime();
            const countdownElement = document.querySelector('#shopify-section-{{section.id}} .time-down'); // 获取倒计时元素
            const time1= new Date("2025-3-3 12:00").getTime();
            const time2= new Date("2025-3-6 12:00").getTime();
            const time3= new Date("2025-3-9 12:00").getTime();
            
            // Set active rocket based on current time
            function setActiveRocket() {
                const now = new Date().getTime();
                const rockets = document.querySelector('#shopify-section-{{section.id}} .rocket');
                
                // Show the appropriate rocket based on current time
                if (now < time1) {
                    // Before first round, show first rocket
                    rockets.classList.remove('scecond');
                    rockets.classList.remove('thrid');
                } else if (now >= time1 && now < time2) {
                    rockets.classList.add('scecond');
                    rockets.classList.remove('thrid');
                } else if (now >= time2) {
                  rockets.classList.remove('scecond');
                  rockets.classList.add('thrid');
                }
            }
            
            function updateCountdown() {
                const now = new Date(); // 当前时间
                const timeDiff = targetDate - now; // 计算时间差
            
                if (timeDiff <= 0) {
                    countdownElement.innerHTML = '<div class="time-box"><span class="number1">00</span><span class="number2">DAYS</span></div><div class="time-box"><span class="number1">00</span><span class="number2">HOURS</span></div><div class="time-box"><span class="number1">00</span><span class="number2">MINUTES</span></div><div class="time-box"><span class="number1">00</span><span class="number2">SECONDS</span></div>';
                    clearInterval(interval); // 停止计时器
                    return;
                }
            
                const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((timeDiff % (1000 * 60)) / 1000);
            
                countdownElement.innerHTML = `
                    <div class="time-box"><span class="number1">${String(days).padStart(2, '0')}</span><span class="number2">DAYS</span></div>
                    <div class="time-box"><span class="number1">${String(hours).padStart(2, '0')}</span><span class="number2">HOURS</span></div>
                    <div class="time-box"><span class="number1">${String(minutes).padStart(2, '0')}</span><span class="number2">MINUTES</span></div>
                    <div class="time-box"><span class="number1">${String(seconds).padStart(2, '0')}</span><span class="number2">SECONDS</span></div>
                `;
            }
            
            // Initialize rocket display
            setActiveRocket();
            
            const interval = setInterval(updateCountdown, 1000); // 每秒更新
            updateCountdown(); // 初始化显示
           })()
        </script>
{% schema %}
  {
    "name": "timedown-collections",
    "settings": [
       {
      "type": "text",
      "id": "bind",
      "label": "bind"
    },
       {
        "type": "image_picker",
        "id":"icon",
        "label":"icon"
      },
     {
        "type": "text",
        "id":"time",
        "label":"time",
        "default":"2025-04-05"
      }
   
    ],
     "blocks": [{
            "type": "product",
            "name": "product",
             "limit": 3,
            "settings": [
                {
                    "type": "product",
                    "id": "product",
                    "label": "product"
                }
            ]
        }],
    "presets": [{"name":"timedown-collections"}]
  }
{% endschema %}