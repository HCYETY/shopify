{{- 'product-introduction-multiple.css' | asset_url | stylesheet_tag -}}

{%- liquid
  assign full_width = section.settings.full_width
  assign gap_size = section.settings.gap_size | default: 'medium'
-%}
<div class="row{% if full_width %} full-width-row {% else %} full-width-row-false {% endif %}">
  <div class="small-12 columns">
    <div class="product-introduction-multiple-container gap-{{ gap_size }}">
      {% if section.blocks.size > 0 %}
        {% for block in section.blocks %}
          {%- liquid
            assign image = block.settings.image
            assign title = block.settings.title
            assign description = block.settings.description
            assign link_url = block.settings.link_url
            assign width = block.settings.width
            assign height = block.settings.height
            assign mobile_width = block.settings.mobile_width
            assign mobile_height = block.settings.mobile_height
            assign preload = forloop.first
          -%}

          <article
            class="image-text-block"
            style="--desktop-width: {{ width }}px; --desktop-height: {{ height }}px; --mobile-width: {{ mobile_width }}px; --mobile-height: {{ mobile_height }}px;"
            {{ block.shopify_attributes }}
          >
            <div class="image-container">
              {% if image != blank %}
                {%- liquid
                  assign master_width = image.src.width | append: 'x' | append: image.src.height
                  assign variable_widths = '300x,400x,500x,600x,700x,800x,' | append: master_width
                -%}
                {%- render 'responsive-image',
                  image: image,
                  sizes: variable_widths,
                  class: 'block-image',
                  priority: preload
                -%}
              {% else %}
                <div class="placeholder-image" role="img" aria-label="占位图片">
                  {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
                </div>
              {% endif %}
            </div>
            <div class="text-container">
              {% if title != blank %}
                <h3 class="text-title">{{ title }}</h3>
              {% endif %}
              {% if description != blank %}
                <div class="text-description">{{ description | newline_to_br }}</div>
              {% endif %}
            </div>
            {% if link_url != blank %}
              <a href="{{ link_url }}" class="block-link" aria-label="查看 {{ title | escape }} 详情"></a>
            {% endif %}
          </article>
        {% endfor %}
      {% else %}
        <div class="no-blocks-placeholder" role="status" aria-live="polite">
          <p>请添加图文内容块</p>
        </div>
      {% endif %}
    </div>
  </div>
</div>
{% schema %}
{
  "name": "图文介绍集合",
  "class": "product-introduction-multiple",
  "settings": [
    {
      "type": "checkbox",
      "id": "full_width",
      "label": "是否全屏",
      "default": true
    },
    {
      "type": "select",
      "id": "gap_size",
      "label": "间距大小",
      "options": [
        {
          "value": "small",
          "label": "小间距"
        },
        {
          "value": "medium",
          "label": "中间距"
        },
        {
          "value": "large",
          "label": "大间距"
        }
      ],
      "default": "medium"
    }
  ],
  "blocks": [
    {
      "type": "image_text",
      "name": "图文块",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "图像",
          "info": "如果不选择图片，将显示占位图片"
        },
        {
          "type": "text",
          "id": "title",
          "label": "标题",
          "default": "标题内容"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "描述",
          "default": "描述内容"
        },
        {
          "type": "url",
          "id": "link_url",
          "label": "链接地址（可选）",
          "info": "点击整个图文块时跳转的链接"
        },
        {
          "type": "number",
          "id": "width",
          "label": "宽度",
          "default": 300
        },
        {
          "type": "number",
          "id": "height",
          "label": "高度",
          "default": 300
        },
        {
          "type": "number",
          "id": "mobile_width",
          "label": "移动宽度",
          "default": 300
        },
        {
          "type": "number",
          "id": "mobile_height",
          "label": "移动高度",
          "default": 300
        }
      ]
    }
  ],
  "max_blocks": 20,
  "presets": [
    {
      "name": "图文介绍集合",
      "blocks": [
        {
          "type": "image_text",
          "settings": {
            "title": "16K Mono LCD",
            "description": "New Motion Structure, Smoother Prints",
            "width": 714,
            "height": 310,
            "mobile_width": 351,
            "mobile_height": 230
          }
        },
        {
          "type": "image_text",
          "settings": {
            "title": "True Leveling-Free",
            "description": "Hassle-Free \nMaintenance & Cleaning",
            "width": 471,
            "height": 309,
            "mobile_width": 351,
            "mobile_height": 230
          }
        },
        {
          "type": "image_text",
          "settings": {
            "title": "New Motion Structure",
            "description": "New Motion Structure, Smoother Prints",
            "width": 288,
            "height": 302,
            "mobile_width": 167,
            "mobile_height": 246
          }
        },
        {
          "type": "image_text",
          "settings": {
            "title": "Intelligent Exposure",
            "description": "Smart Exposure, Perfect Prints",
            "width": 288,
            "height": 302,
            "mobile_width": 167,
            "mobile_height": 246
          }
        },
        {
          "type": "image_text",
          "settings": {
            "title": "Quick-Release Build Plate",
            "description": "New Motion Structure, Smoother Prints",
            "width": 288,
            "height": 302,
            "mobile_width": 167,
            "mobile_height": 246
          }
        },
        {
          "type": "image_text",
          "settings": {
            "title": "Faster Printing Speed",
            "description": "New Motion Structure, Smoother Prints",
            "width": 288,
            "height": 302,
            "mobile_width": 167,
            "mobile_height": 246
          }
        }
      ]
    }
  ]
}
{% endschema %}
